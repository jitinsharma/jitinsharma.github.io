<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.14.1"/><meta name="theme-color" content="hsl(31, 92%, 62%)"/><meta name="description" content="Intercepting string resources for dynamic updates." data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="Taming Android Resources and LayoutInflater for string manipulation - Jitin Sharma" data-gatsby-head="true"/><meta name="twitter:description" content="Intercepting string resources for dynamic updates." data-gatsby-head="true"/><meta name="og:title" content="Taming Android Resources and LayoutInflater for string manipulation - Jitin Sharma" data-gatsby-head="true"/><meta name="og:type" content="website" data-gatsby-head="true"/><meta name="og:description" content="Intercepting string resources for dynamic updates." data-gatsby-head="true"/><style data-href="/styles.fa2e22f4063c800b4b4b.css" data-identity="gatsby-global-css">html{font-size:100}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;background:hsl(var(--color-background));color:hsl(var(--color-foreground));font-size:16px;line-height:1.625;margin:0 0 0 calc(100vw - 100%);text-rendering:optimizelegibility}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:40px;line-height:52px;margin-bottom:26px;margin-top:104px}h2{font-size:27px;line-height:39px}h2,h3{margin-bottom:13px;margin-top:52px}h3{font-size:22px;line-height:26px}h4{font-size:19.2px;margin-top:39px}h4,h5{line-height:26px;margin-bottom:13px}h5,h6{font-size:16px;margin-top:65px}h6{line-height:26px;margin-bottom:13px}img{max-width:100%}hr,img{border:0;display:block}hr{background-image:linear-gradient(to bottom,transparent 1px,transparent 11px,hsl(var(--color-foreground)) 11px,hsl(var(--color-foreground)) 15px,transparent 15px,transparent 26px);background-size:100% 26px;height:26px;margin:52px auto;width:100px}a,hr{color:hsl(var(--color-foreground))}a{text-decoration:none}a:active,a:focus,a:hover{color:hsl(var(--color-primary))}b,strong{font-weight:600}ul{list-style:square;margin-bottom:26px}ul li{margin-bottom:10px;padding:0 5px}p{line-height:26px;margin-bottom:26px}blockquote{font-style:italic;padding:0;text-align:center}figure{display:block;height:auto;width:100%}figcaption{color:hsl(var(--color-foreground));font-size:14px;font-style:italic;line-height:19.5px;margin-bottom:0;margin-top:6.5px;text-align:center}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:310px;padding:0 26px}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{word-wrap:normal;color:#657b83;font-family:ui-monospace,Cascadia Code,Source Code Pro,Menlo,Consolas,DejaVu Sans Mono,monospace;font-size:16px;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:hsl(var(--color-muted))}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#073642}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83;cursor:help}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}:root{--color-background:0 0% 100%;--color-foreground:240 7% 11%;--color-muted:240 6% 96%;--color-muted-foreground:240 6% 46.1%;--color-border:240 2% 89%;--color-primary:342 100% 47%;--color-primary-foreground:240 4% 98%;--color-secondary:240 6% 96%;--color-secondary-foreground:240 2% 17%;--color-accent:240 6% 96%;--color-accent-foreground:240 2% 17%;--color-destructive:342 100% 47%;--color-destructive-foreground:240 7% 11%;--color-positive:162 52% 53%;--color-positive-foreground:240 7% 11%;color-scheme:light}.dark{--color-background:240 7% 11%;--color-foreground:240 4% 98%;--color-muted:240 4% 17%;--color-muted-foreground:240 4% 66%;--color-border:240 4% 17%;--color-primary:342 100% 74%;--color-primary-foreground:240 4% 98%;--color-secondary:240 4% 17%;--color-secondary-foreground:240 4% 98%;--color-accent:240 4% 17%;--color-accent-foreground:240 4% 98%;--color-destructive:342 100% 74%;--color-destructive-foreground:240 7% 11%;--color-positive:162 52% 53%;--color-positive-foreground:240 7% 11%;color-scheme:dark}.feed-module--feed--be542 .feed-module--item--093ea{margin-bottom:32.5px}.feed-module--feed--be542 .feed-module--item--093ea:last-child{margin-bottom:13px}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--title--6ed13{font-size:27px;line-height:39px;margin-bottom:13px;margin-top:0}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--title--6ed13 .feed-module--link--797ef{color:hsl(var(--color-foreground))}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--title--6ed13 .feed-module--link--797ef:focus,.feed-module--feed--be542 .feed-module--item--093ea .feed-module--title--6ed13 .feed-module--link--797ef:hover{border-bottom:1px solid hsl(var(--color-foreground));color:hsl(var(--color-foreground))}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--description--25c4d{color:hsl(var(--color-muted-foreground));font-size:16px;line-height:26px;margin-bottom:19.5px}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--meta--5bd77 .feed-module--time--1da0e{color:hsl(var(--color-foreground));font-size:14px;font-weight:600;text-transform:uppercase}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--meta--5bd77 .feed-module--divider--dc8bf{margin:0 13px}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--meta--5bd77 .feed-module--category--588f4 .feed-module--link--797ef{color:hsl(var(--color-primary));font-size:14px;font-weight:600;text-transform:uppercase}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--more--9d839{color:hsl(var(--color-foreground));font-size:16px}.feed-module--feed--be542 .feed-module--item--093ea .feed-module--more--9d839:focus,.feed-module--feed--be542 .feed-module--item--093ea .feed-module--more--9d839:hover{border-bottom:1px solid hsl(var(--color-primary));color:hsl(var(--color-primary))}.page-module--page--aeaf7{grid-column:span 12;margin-bottom:52px}.page-module--page--aeaf7 .page-module--inner--bbb89{padding:26px 19.5px 0}.page-module--page--aeaf7 .page-module--title--3f843{font-size:40px;font-weight:600;line-height:52px;margin-bottom:37.7px;margin-top:0}.page-module--page--aeaf7 .page-module--body--91ea2{font-size:16px;line-height:26px;margin:0 0 26px}.page-module--page--aeaf7 .page-module--body--91ea2 p a{text-decoration:underline}@media screen and (min-width:685px){.page-module--page--aeaf7{grid-column:span 7}.page-module--page--aeaf7 .page-module--inner--bbb89{padding:32.5px 19.5px 0}}@media screen and (min-width:1100px){.page-module--page--aeaf7{grid-column:span 8}.page-module--page--aeaf7 .page-module--inner--bbb89{padding:39px 26px 0}}.button-module--button--5ffa9{border:1px solid hsl(var(--color-border));border-radius:20px;color:hsl(var(--color-foreground));display:inline-block;font-size:16px;font-weight:400;height:40px;line-height:40px;margin-left:auto;margin-right:auto;padding:0 26px;text-align:center;text-decoration:none}.button-module--button--5ffa9:focus,.button-module--button--5ffa9:hover{background:hsl(var(--color-accent));color:hsl(var(--color-accent-foreground))}.post-tags-module--post-tags--6c235{list-style:none;margin-bottom:13px;padding:0}.post-tags-module--post-tags--6c235 .post-tags-module--item--53595{display:inline-block;margin:6.5px 0}@media screen and (min-width:685px){.post-tags-module--post-tags--6c235 .post-tags-module--item--53595:first-child{margin-left:0;padding-left:0}}.post-author-module--post-author--2247e{border-top:1px solid hsl(var(--color-border));line-height:26px;margin-bottom:52px;margin-top:26px;max-width:900px;padding-top:26px}.post-author-module--post-author--2247e .post-author-module--description--78aeb .post-author-module--x--f2941{display:block;text-decoration:underline}@media screen and (min-width:685px){.post-author-module--post-author--2247e{margin-left:auto;margin-right:auto}}.post-footer-module--post-footer--9c13c .post-footer-module--date--abfe9{font-style:italic}.post-content-module--postContent--5129c{margin:0 auto;max-width:945px;padding:0 13px}.post-content-module--postContent--5129c .post-content-module--title--b7e5d{font-size:32px;font-weight:600;line-height:42.9px;margin:26px auto 0;max-width:900px;text-align:center}.post-content-module--postContent--5129c .post-content-module--body--3be78 figure{margin-bottom:26px}.post-content-module--postContent--5129c .post-content-module--body--3be78 figure blockquote{font-style:italic;margin-top:0;padding:26px 0;text-align:center}.post-content-module--postContent--5129c .post-content-module--body--3be78 figure blockquote p{font-size:26.9072px;line-height:39px;margin-bottom:26px;margin-top:0;max-width:900px}.post-content-module--postContent--5129c .post-content-module--body--3be78 a{text-decoration:underline}.post-content-module--postContent--5129c .post-content-module--body--3be78 *{margin-left:auto;margin-right:auto;max-width:900px}.post-content-module--postContent--5129c .post-content-module--body--3be78 h2>a{visibility:hidden}.post-content-module--postContent--5129c .post-content-module--body--3be78 h2>a>svg{fill:hsl(var(--color-foreground))}.post-content-module--postContent--5129c .post-content-module--body--3be78 img{max-width:100%}@media screen and (min-width:1100px){.post-content-module--postContent--5129c{padding:0}.post-content-module--postContent--5129c .post-content-module--title--b7e5d{font-size:48px;line-height:58.5px;margin-bottom:39px;margin-top:58.5px}.post-content-module--postContent--5129c .post-content-module--body--3be78,.post-content-module--postContent--5129c .post-content-module--body--3be78 p{font-size:18px;line-height:29.25px;margin-bottom:29.25px}.post-content-module--postContent--5129c .post-content-module--body--3be78 h2>a{padding-right:13px;visibility:unset}}.theme-switcher-module--themeSwitcher--8bcb4{--theme-switcher-color:hsl(var(--color-foreground))}.theme-switcher-module--themeSwitcher--8bcb4 .theme-switcher-module--button--1cdf0{align-items:center;background:transparent;border:0;cursor:pointer;display:flex;justify-content:center;outline:0}.theme-switcher-module--themeSwitcher--8bcb4 .theme-switcher-module--button--1cdf0 svg{stroke:var(--theme-switcher-color);pointer-events:none;transition:stroke .4s}.theme-switcher-module--themeSwitcher--8bcb4 .theme-switcher-module--button--1cdf0:hover{--theme-switcher-color:hsl(var(--color-primary))}.theme-switcher-module--themeSwitcher--8bcb4 .theme-switcher-module--moon--f9082{stroke-dasharray:0 1px;opacity:0;transition:stroke-dasharray .2s ease-in,opacity .4s ease-in}.theme-switcher-module--themeSwitcher--8bcb4 .theme-switcher-module--sun--65dc4{stroke-dasharray:1px 1px;opacity:1;transition:stroke-dasharray .2s ease-in,opacity .4s ease-in}.theme-switcher-module--themeSwitcher--8bcb4.theme-switcher-module--dark--fca2d .theme-switcher-module--moon--f9082{stroke-dasharray:1px 1px;opacity:1}.theme-switcher-module--themeSwitcher--8bcb4.theme-switcher-module--dark--fca2d .theme-switcher-module--sun--65dc4{stroke-dasharray:0 1px;opacity:0}.social-share-module--socialShare--2c4d2{border-top:1px solid var(--color-gray-border);margin:0 auto;max-width:900px;padding:26px 13px}.social-share-module--socialShare--2c4d2 .social-share-module--title--28c75{color:var(--color-primary);font-size:16px;font-weight:600;margin:0 0 26px}.social-share-module--socialShare--2c4d2 .social-share-module--buttons--1fc6d{align-items:center;display:flex;gap:12px}.social-share-module--socialShare--2c4d2 .social-share-module--buttons--1fc6d button{outline:none!important}.social-share-module--socialShare--2c4d2 .social-share-module--buttons--1fc6d button:hover{opacity:.8;transform:translateY(-2px);transition:all .2s ease}@media screen and (min-width:1100px){.social-share-module--socialShare--2c4d2{padding:0}}@media screen and (min-width:685px){.social-share-module--socialShare--2c4d2 .social-share-module--buttons--1fc6d{gap:10px}}.post-module--post--cd62a{grid-column:span 12}.post-module--post--cd62a .post-module--content--49372{margin:0 auto}.post-module--post--cd62a .post-module--comments--82b11,.post-module--post--cd62a .post-module--footer--87cff{margin:0 auto;max-width:900px;padding:0 13px}.post-module--post--cd62a .post-module--buttons--26059{align-items:center;display:flex;justify-content:center;margin:26px 0 0;text-align:center}.post-module--post--cd62a .post-module--buttons--26059 .post-module--buttonArticles--8a265{margin:0 13px 0 0}@media screen and (min-width:1100px){.post-module--post--cd62a .post-module--comments--82b11,.post-module--post--cd62a .post-module--footer--87cff{padding:0}.post-module--post--cd62a .post-module--buttons--26059{left:30px;margin:0 13px 0 0;max-width:none;position:fixed;top:30px}}.layout-module--layout--e08e0{display:grid;gap:30px;grid-template-columns:repeat(12,1fr);margin:0 auto;max-width:1070px}.sidebar-menu-module--sidebar-menu--a1f76{margin-bottom:26px}.sidebar-menu-module--sidebar-menu--a1f76 .sidebar-menu-module--list--11f39{list-style:none;margin:0;padding:0}.sidebar-menu-module--sidebar-menu--a1f76 .sidebar-menu-module--list--11f39 .sidebar-menu-module--item--67667{margin:13px 0;padding:0}.sidebar-menu-module--sidebar-menu--a1f76 .sidebar-menu-module--list--11f39 .sidebar-menu-module--item--67667 .sidebar-menu-module--link--b41cc{border:0;color:hsl(var(--color-foreground));font-size:16px;font-weight:400}.sidebar-menu-module--sidebar-menu--a1f76 .sidebar-menu-module--list--11f39 .sidebar-menu-module--item--67667 .sidebar-menu-module--link--b41cc:focus,.sidebar-menu-module--sidebar-menu--a1f76 .sidebar-menu-module--list--11f39 .sidebar-menu-module--item--67667 .sidebar-menu-module--link--b41cc:hover{border-bottom:1px solid hsl(var(--color-primary));color:hsl(var(--color-primary))}.sidebar-menu-module--sidebar-menu--a1f76 .sidebar-menu-module--list--11f39 .sidebar-menu-module--item--67667 .sidebar-menu-module--link--b41cc.sidebar-menu-module--active--0ae28{border-bottom:1px solid hsl(var(--color-foreground));color:hsl(var(--color-foreground))}.sidebar-author-module--sidebar-author--f2c33 .sidebar-author-module--photo--d388f{background-clip:padding-box;border:1px solid hsl(var(--color-muted));border-radius:50%;display:inline-block;height:75px;margin-bottom:0;width:75px}.sidebar-author-module--sidebar-author--f2c33 .sidebar-author-module--photo--d388f img{border-radius:50%}.sidebar-author-module--sidebar-author--f2c33 .sidebar-author-module--title--a6921{font-size:18px;font-weight:600;line-height:29.25px;margin:0}.sidebar-author-module--sidebar-author--f2c33 .sidebar-author-module--title--a6921 .sidebar-author-module--link--45332,.sidebar-author-module--sidebar-author--f2c33 .sidebar-author-module--title--a6921 .sidebar-author-module--link--45332:focus,.sidebar-author-module--sidebar-author--f2c33 .sidebar-author-module--title--a6921 .sidebar-author-module--link--45332:hover{color:hsl(var(--color-foreground))}.sidebar-author-module--sidebar-author--f2c33 .sidebar-author-module--description--05f75{color:hsl(var(--color-muted-foreground));line-height:26px;margin-bottom:26px}.sidebar-author-module--sidebar-author--f2c33 .sidebar-author-module--titleContainer--335a3{align-items:center;display:flex;justify-content:space-between;margin:13px 0}.icon-module--icon--1a7c5{fill:currentcolor;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;speak:none;stroke:currentcolor;stroke-width:0;display:inline-block;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1em;text-align:center;text-transform:none;width:1em}.sidebar-contacts-module--sidebar-contacts--bbb62{margin-bottom:26px}.sidebar-contacts-module--sidebar-contacts--bbb62 .sidebar-contacts-module--list--cbda4{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;margin:13px 0;max-width:165px;padding:0}.sidebar-contacts-module--sidebar-contacts--bbb62 .sidebar-contacts-module--list--cbda4 .sidebar-contacts-module--item--1f6f2{border:1px solid hsl(var(--color-muted));border-radius:50%;margin:6.5px;padding:0}.sidebar-contacts-module--sidebar-contacts--bbb62 .sidebar-contacts-module--list--cbda4 .sidebar-contacts-module--item--1f6f2:nth-child(3n+1){margin-left:0}.sidebar-contacts-module--sidebar-contacts--bbb62 .sidebar-contacts-module--list--cbda4 .sidebar-contacts-module--item--1f6f2 .sidebar-contacts-module--link--8ba2a{align-items:center;border:0;color:hsl(var(--color-foreground));cursor:pointer;display:flex;height:40px;justify-content:center;width:40px}.sidebar-contacts-module--sidebar-contacts--bbb62 .sidebar-contacts-module--list--cbda4 .sidebar-contacts-module--item--1f6f2 .sidebar-contacts-module--link--8ba2a:focus,.sidebar-contacts-module--sidebar-contacts--bbb62 .sidebar-contacts-module--list--cbda4 .sidebar-contacts-module--item--1f6f2 .sidebar-contacts-module--link--8ba2a:hover{color:hsl(var(--color-primary))}.sidebar-copyright-module--sidebar-copyright--97d08{color:hsl(var(--color-muted-foreground));font-size:14px}.sidebar-module--sidebar--58428{grid-column:span 12;width:100%}.sidebar-module--sidebar--58428 .sidebar-module--inner--f87a4{padding:26px 19.5px 0;position:relative}.sidebar-module--sidebar--58428 .sidebar-module--inner--f87a4:after{background:hsl(var(--color-border));background:linear-gradient(to bottom,hsl(var(--color-border)) 0,hsl(var(--color-border)) 48%,hsl(var(--color-background)) 100%)}@media screen and (min-width:685px){.sidebar-module--sidebar--58428{grid-column:span 5}.sidebar-module--sidebar--58428 .sidebar-module--inner--f87a4{padding:32.5px 19.5px 0}.sidebar-module--sidebar--58428 .sidebar-module--inner--f87a4:after{bottom:0;content:"";height:540px;position:absolute;right:-10px;top:30px;width:1px}}@media screen and (min-width:960px){.sidebar-module--sidebar--58428{grid-column:span 4}.sidebar-module--sidebar--58428 .sidebar-module--inner--f87a4{padding:39px}}.pagination-module--pagination--e5305{display:flex;margin-top:52px}.pagination-module--pagination--e5305 .pagination-module--previous--85cf8{text-align:left;width:50%}.pagination-module--pagination--e5305 .pagination-module--previous--85cf8 .pagination-module--previousLink--35663{color:hsl(var(--color-foreground));font-size:26px;font-weight:700}.pagination-module--pagination--e5305 .pagination-module--previous--85cf8 .pagination-module--previousLink--35663:focus,.pagination-module--pagination--e5305 .pagination-module--previous--85cf8 .pagination-module--previousLink--35663:hover{color:hsl(var(--color-primary))}.pagination-module--pagination--e5305 .pagination-module--previous--85cf8 .pagination-module--previousLink--35663.pagination-module--disable--f4637{color:hsl(var(--color-muted-foreground));pointer-events:none}.pagination-module--pagination--e5305 .pagination-module--next--92e1f{text-align:right;width:50%}.pagination-module--pagination--e5305 .pagination-module--next--92e1f .pagination-module--nextLink--9a2d7{color:hsl(var(--color-foreground));font-size:26px;font-weight:700}.pagination-module--pagination--e5305 .pagination-module--next--92e1f .pagination-module--nextLink--9a2d7:focus,.pagination-module--pagination--e5305 .pagination-module--next--92e1f .pagination-module--nextLink--9a2d7:hover{color:hsl(var(--color-primary))}.pagination-module--pagination--e5305 .pagination-module--next--92e1f .pagination-module--nextLink--9a2d7.pagination-module--disable--f4637{color:hsl(var(--color-muted-foreground));pointer-events:none}</style><link rel="alternate" type="application/rss+xml" title="Jitin Sharma" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-B3NPM3RCRE"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-B3NPM3RCRE', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=5272172f19df504b4722df79cd5148cf" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=5272172f19df504b4722df79cd5148cf"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=5272172f19df504b4722df79cd5148cf"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=5272172f19df504b4722df79cd5148cf"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=5272172f19df504b4722df79cd5148cf"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=5272172f19df504b4722df79cd5148cf"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=5272172f19df504b4722df79cd5148cf"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=5272172f19df504b4722df79cd5148cf"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=5272172f19df504b4722df79cd5148cf"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-gatsby-head="true">Taming Android Resources and LayoutInflater for string manipulation - Jitin Sharma</title></head><body><script>
          void function() {
            var cachedMode;

            try {
              var preferredTheme = JSON.parse(localStorage.getItem("diesel:theme-atom"));

              if (preferredTheme && preferredTheme.mode) {
                cachedMode = preferredTheme.mode;
              }
            } catch (err) { }

            function setTheme(newTheme) {
              document.documentElement.className = newTheme;
            }

            var darkQuery = window.matchMedia("(prefers-color-scheme: dark)");

            setTheme(cachedMode || (darkQuery.matches ? "dark" : "light"));
          }()
        </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--layout--e08e0"><div class="post-module--post--cd62a"><div class="post-module--buttons--26059"><a class="button-module--button--5ffa9 post-module--buttonArticles--8a265" href="/">All Articles</a></div><div class="post-module--content--49372"><div class="post-content-module--postContent--5129c"><h1 class="post-content-module--title--b7e5d">Taming Android Resources and LayoutInflater for string manipulation</h1><div class="post-content-module--body--3be78"><p>Recently I was working on a problem where we wanted to make our string resources dynamic. In every app, there are strings which would often come from backend APIs and are dynamic by nature, but a lot of strings are packaged in <code class="language-text">strings.xml</code>. There might be requirements to make few of these dynamic as well for eg. A/B testing etc. The major pain point here is these strings would have usages spread all over codebase and there is no default way to override <code class="language-text">strings.xml</code> to make them dynamic.</p>
<p>One solution is to move away from <code class="language-text">strings.xml</code> and keep strings as constant objects or a map. But moving away from <code class="language-text">strings.xml</code> has few disadvantages such as</p>
<ul>
<li>Strings cannot be used in layout preview</li>
<li>Need new logic for localisation</li>
<li>Large migration cost of removing string references in existing code base.</li>
</ul>
<p>So we want to come up with a solution where we can keep <code class="language-text">strings.xml</code> as well as have dynamic updates to them.</p>
<p>In this article I’ll try to explain my experiments with string retrieval process to override default string values.</p>
<h2 id="string-packaging-and-aapt-" style="position:relative;"><a href="#string-packaging-and-aapt-" aria-label="string packaging and aapt  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>String packaging and AAPT 🔡</h2>
<p>Let’s first understand why key-value pairs in <code class="language-text">strings.xml</code> cannot be dynamic by nature.</p>
<p>Here’s an example of string resource in <code class="language-text">strings.xml</code></p>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello_world<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span></code></pre></div>
<p>We can access this string in one of these ways depending on whether we are retrieving it in xml or kotlin file</p>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml">android:text="@string/hello_world" //xml</code></pre></div>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin">context<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>hello_world<span class="token punctuation">)</span> <span class="token comment">//kotlin</span></code></pre></div>
<p><code class="language-text">R.string.hello_world</code> is a constant integer which is created by <code class="language-text">aapt</code> and added to <code class="language-text">R.java</code> along with other constants.
Once an <code class="language-text">apk</code> is generated strings are packaged in <code class="language-text">resources.arsc</code> along with other xml data. Here’s a image of our packaged string along with it’s generated id.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/6f9695f7c9e70b93ef45bce488a17261/9c2d2/resource-arsc-preview.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 10%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAXklEQVR42o3FQQtAMAAG0P0tTlzGmk22aTIkN5yJUn76R8uBm8PrESYNuHLIdANhOrDCeVRYyLJDlKh/Uo34ngg7Qg0nsmZF3h9I6t2j1QLZbgj5jMCbnt+mzyEfcQFU203eY8e0+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/6f9695f7c9e70b93ef45bce488a17261/8ac56/resource-arsc-preview.webp 240w,
/static/6f9695f7c9e70b93ef45bce488a17261/d3be9/resource-arsc-preview.webp 480w,
/static/6f9695f7c9e70b93ef45bce488a17261/e46b2/resource-arsc-preview.webp 960w,
/static/6f9695f7c9e70b93ef45bce488a17261/f992d/resource-arsc-preview.webp 1440w,
/static/6f9695f7c9e70b93ef45bce488a17261/882b9/resource-arsc-preview.webp 1920w,
/static/6f9695f7c9e70b93ef45bce488a17261/3b8fd/resource-arsc-preview.webp 2226w"
              sizes="(max-width: 960px) 100vw, 960px"
              type="image/webp"
            />
          <source
            srcset="/static/6f9695f7c9e70b93ef45bce488a17261/8ff5a/resource-arsc-preview.png 240w,
/static/6f9695f7c9e70b93ef45bce488a17261/e85cb/resource-arsc-preview.png 480w,
/static/6f9695f7c9e70b93ef45bce488a17261/d9199/resource-arsc-preview.png 960w,
/static/6f9695f7c9e70b93ef45bce488a17261/07a9c/resource-arsc-preview.png 1440w,
/static/6f9695f7c9e70b93ef45bce488a17261/29114/resource-arsc-preview.png 1920w,
/static/6f9695f7c9e70b93ef45bce488a17261/9c2d2/resource-arsc-preview.png 2226w"
            sizes="(max-width: 960px) 100vw, 960px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/6f9695f7c9e70b93ef45bce488a17261/d9199/resource-arsc-preview.png"
            alt="resource arsc preview"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<p>The id here <code class="language-text">0x7f100027</code> represents the integer value of <code class="language-text">R.string.hello_world</code>.
Any layout file referencing this string value using <code class="language-text">@string</code> is also re-written with same id.</p>
<p>-> <code class="language-text">activity_main.xml</code> packaged in apk</p>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
	<span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-2<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-2<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@ref/0x7f100027<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre></div>
<p>Similar replacement also happens in java/kotlin bytecode when they are referenced using <code class="language-text">R.string.*</code> integers.</p>
<p>-> <code class="language-text">dex</code> bytecode for <code class="language-text">MainActivity.kt</code></p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token punctuation">.</span>line <span class="token number">22</span>
<span class="token keyword">const</span> v0<span class="token punctuation">,</span> <span class="token number">0x7f100027</span>
invoke<span class="token operator">-</span>virtual <span class="token punctuation">{</span>p0<span class="token punctuation">,</span> v0<span class="token punctuation">}</span><span class="token punctuation">,</span> Lin<span class="token operator">/</span>jitinsharma<span class="token operator">/</span>stringplayground<span class="token operator">/</span>MainActivity<span class="token punctuation">;</span><span class="token operator">-></span><span class="token function">getString</span><span class="token punctuation">(</span>I<span class="token punctuation">)</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token punctuation">;</span>
move<span class="token operator">-</span>result<span class="token operator">-</span><span class="token keyword">object</span> v0
<span class="token keyword">const</span><span class="token operator">-</span>string v1<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"getString(R.string.hello_world)"</span></span></code></pre></div>
<p>These constant ids are generated in build time and are randomised during each build. Hence it’s not possible to update them dynamically.</p>
<h2 id="investigating-method-callstack-️" style="position:relative;"><a href="#investigating-method-callstack-%EF%B8%8F" aria-label="investigating method callstack ️ permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Investigating method callstack 🕵️</h2>
<p>While it’s not viable to update string files themselves, but we could try overriding methods which actually retrieve strings.
In this section we explore the same.</p>
<p>At a lower level, there are always two classes involved when a string is retrieved</p>
<ul>
<li>Resources - When <code class="language-text">getString</code> is used java/kotlin</li>
<li>TypedArray - When <code class="language-text">@string/</code> is used in xml</li>
</ul>
<p>Let’s investigate each of them one by one.</p>
<h2 id="resourceful-resources-" style="position:relative;"><a href="#resourceful-resources-" aria-label="resourceful resources  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resourceful Resources 📚</h2>
<p>Let’s look at first option of retrieving string via <code class="language-text">getString</code> method. The <code class="language-text">getString</code> methods calls up following chain of methods</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin">── context<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    └── Resources #<span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        └── AssetManager #<span class="token function">getResourceValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            └── ApkAssets #<span class="token function">getStringFromPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                └── StringBlock #<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>All classes in this chain are final, except <code class="language-text">Resources</code>. Let’s poke it 🕵️‍♂️</p>
<p>We start by subclassing <code class="language-text">Resources</code> to create a <code class="language-text">CustomResource</code> class.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">CustomResources</span><span class="token punctuation">(</span>
    res<span class="token operator">:</span> Resources<span class="token punctuation">,</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> dynamicStringMap<span class="token operator">:</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Resources</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>assets<span class="token punctuation">,</span> res<span class="token punctuation">.</span>displayMetrics<span class="token punctuation">,</span> res<span class="token punctuation">.</span>configuration<span class="token punctuation">)</span></code></pre></div>
<p>The moment you override Resources, you’ll be welcomed with following deprecation ⚠️ warning ⚠️</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">@deprecated Resources should not be constructed by apps.</code></pre></div>
<p>Since Resources can be overridden on configuration change, overriding resources is discouraged. Ignoring this warning for now(ofcourse at your risk) 🤷‍♂️</p>
<p>Here we have also have <code class="language-text">dynamicStringMap</code> which is an in-memory map of strings which have been fetched from backend. It’s good to keep this structure in memory so the string access is faster since your views might request a lot of strings in their layout cycle.</p>
<p>Overriding resources allows us to override following methods</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getString</span><span class="token punctuation">(</span>id<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getStringArray</span><span class="token punctuation">(</span>id<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getStringArray</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getText</span><span class="token punctuation">(</span>id<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> CharSequence <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// More overrides available</span></code></pre></div>
<ul>
<li><code class="language-text">getString</code> and <code class="language-text">getStringArray</code> are for standard strings and string-arrays which you have declared in <code class="language-text">strings.xml</code></li>
<li><code class="language-text">getText</code> is invoked for any text with custom formatting present within xml.</li>
</ul>
<p>Each of these methods accept integer as a parameter which is equivalent to what you would pass when calling these methods with <code class="language-text">R.string.*</code></p>
<p>Now we apply a simple redirection in one of these methods</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token comment">/**
* For a given id, this function checks if string for that key 
* should be retrieved from dynamic string map.
* If not present, it fallbacks to super call which will retrieve string from strings.xml
**/</span>
<span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getString</span><span class="token punctuation">(</span>id<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>               <span class="token comment">// id=0x7f100027</span>
    <span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token function">getResourceEntryName</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>                 <span class="token comment">// name=hello_world</span>
    <span class="token keyword">return</span> dynamicStringMap<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">?:</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token comment">// dynamicStringMap[name]=Hello Android!</span>
                                                        <span class="token comment">// super.getString(id)=Hello World!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Similar to <code class="language-text">getString</code>, you can set up redirects to <code class="language-text">getStringArray</code>, <code class="language-text">getQuantityString</code>(for <code class="language-text">&lt;plurals></code>) and many more functions.</p>
<p>Now we have our custom resources, we need to attach them to our context. This can be done by creating a custom ContextWrapper.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">CustomContextWrapper</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> base<span class="token operator">:</span> Context<span class="token punctuation">,</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> dynamicStringMap<span class="token operator">:</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ContextWrapper</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">CustomResources</span><span class="token punctuation">(</span>base<span class="token punctuation">.</span>resources<span class="token punctuation">,</span> dynamicStringMap<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<blockquote>
<p><strong>ContextWrapper allow us to override context by providing a new copy of it. The exisiting context remains intact.</strong></p>
</blockquote>
<p>Now we can attach this CustomContextWrapper in our activity</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token comment">// MainActivity.kt</span>
<span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">attachBaseContext</span><span class="token punctuation">(</span>newBase<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">attachBaseContext</span><span class="token punctuation">(</span><span class="token function">CustomContextWrapper</span><span class="token punctuation">(</span>newBase<span class="token punctuation">,</span> dynamicStringMap<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>Note</strong>: ContextWrappers are needed to be attached only at Activity. Fragments, Custom View end up inheriting context from container activity itself.</p>
<p>You can also attach ContextWrapper to base activity if you have one or manually add this to all activities(or write an annotation processor to automate it 🙂 )</p>
<p>Once we complete this setup</p>
<ul>
<li>We have a <code class="language-text">dynamicStringMap</code> which contains subset of strings which need to be dynamic.</li>
<li>All <code class="language-text">getString</code> calls are routed through our custom resources which decides which string value should be returned.</li>
<li>All implementation details of <code class="language-text">getString</code> in our codebase remain untouched.</li>
</ul>
<p>The problem is half solved though, we still need to figure out a solution for <code class="language-text">@string</code> in xml resources.</p>
<h2 id="finding-view-in-a-haystack-" style="position:relative;"><a href="#finding-view-in-a-haystack-" aria-label="finding view in a haystack  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Finding view in a haystack 🔍</h2>
<p>String values in xml layouts are not resolved from <code class="language-text">Resources</code>, hence our existing solution doesn’t work for strings referenced in layout files and in most of codebases we are still dependent on xml layouts so it’s not something we can ignore.</p>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml">android:text="@string/hello_world"</code></pre></div>
<p>Any text referenced in xml via <code class="language-text">@string</code> is resolved by corresponding View using <code class="language-text">TypedArray</code>.
<code class="language-text">TypedArray</code> is final by definition and cannot be subclassed.</p>
<blockquote>
<p><code class="language-text">TypedArray</code> is an internal android class which is used to retrieve attributes from various xml resources. All Views use <code class="language-text">TypedArray</code> to get attributes such as <code class="language-text">text</code>, <code class="language-text">layout_width</code> etc. TypedArray is also recycled for optimisation and reuse.</p>
</blockquote>
<p><code class="language-text">TypedArray</code> is important and can’t be overridden. So now what?</p>
<p>While we can’t override text which is reaching <code class="language-text">TextView</code> from <code class="language-text">TypedArray</code>, we can always override the view itself!</p>
<p>All views are inflated using <code class="language-text">LayoutInflater</code> and this class itself can be overridden to create a <code class="language-text">CustomLayoutInflater</code>. Again, I should warn you about creating Custom LayoutInflater may come with it’s own set of unintended issues(but that hasn’t stopped us till now 😛 ).</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> CustomLayoutInflater <span class="token keyword">constructor</span><span class="token punctuation">(</span>
    original<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span>
    newContext<span class="token operator">:</span> Context<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">LayoutInflater</span><span class="token punctuation">(</span>original<span class="token punctuation">,</span> newContext<span class="token punctuation">)</span></code></pre></div>
<p>Overriding <code class="language-text">LayoutInflater</code> needs overriding a lot of functions and classes such as <code class="language-text">Factory</code>, <code class="language-text">Factory2</code>. What we are looking specifically is for a function which creates view.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> attrs<span class="token operator">:</span> AttributeSet<span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> view <span class="token operator">=</span> <span class="token function">createView</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"android.widget."</span></span><span class="token punctuation">,</span> attrs<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token keyword">is</span> TextView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Here we get original TextView and then return it after overriding text</span>
            <span class="token keyword">return</span> <span class="token function">overrideTextView</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> ClassNotFoundException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>inflateException<span class="token operator">:</span> InflateException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreateView</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<ul>
<li>We override <code class="language-text">onCreateView</code> of <code class="language-text">LayoutInflater</code> and intercept views with prefix <code class="language-text">android.widget.</code> which contains <code class="language-text">TextView</code> class.</li>
<li>With this we intercept all <code class="language-text">TextView</code>(s) which are inflated but before they are actually painted on screen.</li>
</ul>
<p>Now onto overriding the TextView</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">overrideTextView</span><span class="token punctuation">(</span>view<span class="token operator">:</span> TextView<span class="token punctuation">,</span> attrs<span class="token operator">:</span> AttributeSet<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> TextView <span class="token punctuation">{</span>
    <span class="token keyword">val</span> typedArray <span class="token operator">=</span> view<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">obtainStyledAttributes</span><span class="token punctuation">(</span>attrs<span class="token punctuation">,</span> <span class="token function">intArrayOf</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>R<span class="token punctuation">.</span>attr<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> stringResource <span class="token operator">=</span> typedArray<span class="token punctuation">.</span><span class="token function">getResourceId</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    view<span class="token punctuation">.</span>text <span class="token operator">=</span> view<span class="token punctuation">.</span>resources<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span>stringResource<span class="token punctuation">)</span>
    typedArray<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> view
<span class="token punctuation">}</span></code></pre></div>
<p>Using same old <code class="language-text">TypedArray</code>, we find out the id of string resources at <code class="language-text">android:text</code> location in xml. Once we get the id, we again call <code class="language-text">resources.getText</code> which will route through our <code class="language-text">CustomResources</code> implementation and then set the new string to     <code class="language-text">TextView</code>.</p>
<p>Now that we have our <code class="language-text">CustomLayoutInflater</code> ready, we need to attach it to <code class="language-text">CustomContextWrapper</code> we had created earlier.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">CustomContextWrapper</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> base<span class="token operator">:</span> Context<span class="token punctuation">,</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> dynamicStringMap<span class="token operator">:</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ContextWrapper</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">CustomResources</span><span class="token punctuation">(</span>base<span class="token punctuation">.</span>resources<span class="token punctuation">,</span> dynamicStringMap<span class="token punctuation">)</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getSystemService</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> Any<span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Context<span class="token punctuation">.</span>LAYOUT_INFLATER_SERVICE <span class="token operator">==</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">CustomLayoutInflater</span><span class="token punctuation">(</span>LayoutInflater<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>baseContext<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h4 id="side-note" style="position:relative;"><a href="#side-note" aria-label="side note permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Side Note</h4>
<p>We can avoid complexities of overriding <code class="language-text">LayoutInflater</code> by using <a href="https://github.com/InflationX/ViewPump" target="_blank" rel="nofollow noopener noreferrer">ViewPump</a> which does the same job and provides an API for intercepting view inflation.</p>
<h2 id="resources-loaders-" style="position:relative;"><a href="#resources-loaders-" aria-label="resources loaders  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resources Loaders 🔮</h2>
<p>Android 11 has introduced ability to load resources dynamically via <code class="language-text">ResourcesLoader</code> and <code class="language-text">ResourcesProvider</code>. This is not just restricted to string files but also allows dynamic loading of drawables and other resource files. This is an approximate way of using these classes</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> provider <span class="token operator">=</span> ResourcesProvider<span class="token punctuation">.</span><span class="token function">loadFromDirectory</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"/somepath/"</span></span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
								<span class="token comment">// or loadFromApk()</span>
<span class="token keyword">val</span> loader <span class="token operator">=</span> <span class="token function">ResourcesLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
loader<span class="token punctuation">.</span><span class="token function">addProvider</span><span class="token punctuation">(</span>provider<span class="token punctuation">)</span>
resources<span class="token punctuation">.</span><span class="token function">addLoaders</span><span class="token punctuation">(</span>loader<span class="token punctuation">)</span> <span class="token comment">// Application resources</span></code></pre></div>
<p>There aren’t proper samples of this API provided right now and it’s only available on Android 11 and above, so there is a long time for this API to be usable for majority of apps.</p>
<h3 id="recap" style="position:relative;"><a href="#recap" aria-label="recap permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recap</h3>
<ul>
<li>We created an in-memory map of strings fetched from server.</li>
<li>We created <code class="language-text">CustomResources</code> to override string retrieval and redirect it to fetch dynamic strings from map.</li>
<li>We created <code class="language-text">CustomLayoutInflater</code> to reset text of TextViews inflated from xml with string resource.</li>
<li>We patched all of this together in <code class="language-text">CustomContextWrapper</code> which is attached to each activity overriding it’s context.</li>
</ul>
<h3 id="faq" style="position:relative;"><a href="#faq" aria-label="faq permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FAQ</h3>
<ul>
<li>
<p>Should i do this?</p>
<p>Depends. There are other alternatives like moving away from xml string resources to normal class objects/variables as strings which won’t require above overrides to system classes. But larger codebases may not have that luxury.</p>
</li>
<li>
<p>Is anyone else doing this?</p>
<p>There are a lot of open source libraries like <a href="https://github.com/JcMinarro/Philology" target="_blank" rel="nofollow noopener noreferrer">Philogy</a> and even commercial ones like <a href="https://github.com/crowdin/mobile-sdk-android" target="_blank" rel="nofollow noopener noreferrer">Crowdin</a> which use this approach. So there are teams somewhere adopting this approach.</p>
</li>
<li>
<p>Is it enough to override <code class="language-text">TextView</code>?</p>
<p>No. <code class="language-text">TextView</code> might represent bulk of text displayed on your UI but there are classes like <code class="language-text">Toolbar</code> which also display text without a <code class="language-text">TextView</code> component. You can override these classes as well in <code class="language-text">CustomLayoutInflater</code>.</p>
</li>
<li>
<p>What are performance impacts?</p>
<p>I did some performance analysis on my own projects and found results to be kind of inconclusive. Layout inflation time did increase but % varied from 4 to 38 in one case. I guess it’s better to trace layout inflation time for your project and check if increase is within limits.</p>
</li>
</ul>
<p>Thanks for reading!</p></div></div></div><div class="post-module--footer--87cff"><div class="post-footer-module--post-footer--9c13c"><p class="post-footer-module--date--abfe9">Published<!-- --> <!-- -->Jul 28, 2020</p></div><ul class="post-tags-module--post-tags--6c235"><li class="post-tags-module--item--53595"><a class="button-module--button--5ffa9" href="/tag/android/">Android</a></li></ul><div class="post-author-module--post-author--2247e"><p class="post-author-module--description--78aeb"><a class="post-author-module--x--f2941" href="https://www.x.com/_jitinsharma" rel="noopener noreferrer" target="_blank"><strong>Jitin Sharma</strong> on X</a></p></div></div><div class="social-share-module--socialShare--2c4d2"><h4 class="social-share-module--title--28c75">Share this post</h4><div class="social-share-module--buttons--1fc6d"><button class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="32" fill="#000000"></circle><path d="M 41.116 18.375 h 4.962 l -10.8405 12.39 l 12.753 16.86 H 38.005 l -7.821 -10.2255 L 21.235 47.625 H 16.27 l 11.595 -13.2525 L 15.631 18.375 H 25.87 l 7.0695 9.3465 z m -1.7415 26.28 h 2.7495 L 24.376 21.189 H 21.4255 z" fill="white"></path></svg></button><button class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="32" fill="#0077B5"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="32" fill="#FF5700"></circle><path d="M 53.34375 32 C 53.277344 30.160156 52.136719 28.53125 50.429688 27.839844 C 48.722656 27.148438 46.769531 27.523438 45.441406 28.800781 C 41.800781 26.324219 37.519531 24.957031 33.121094 24.863281 L 35.199219 14.878906 L 42.046875 16.320312 C 42.214844 17.882812 43.496094 19.09375 45.066406 19.171875 C 46.636719 19.253906 48.03125 18.183594 48.359375 16.644531 C 48.6875 15.105469 47.847656 13.558594 46.382812 12.992188 C 44.914062 12.425781 43.253906 13.007812 42.464844 14.367188 L 34.625 12.800781 C 34.363281 12.742188 34.09375 12.792969 33.871094 12.9375 C 33.648438 13.082031 33.492188 13.308594 33.441406 13.566406 L 31.070312 24.671875 C 26.617188 24.738281 22.277344 26.105469 18.59375 28.609375 C 17.242188 27.339844 15.273438 26.988281 13.570312 27.707031 C 11.863281 28.429688 10.746094 30.089844 10.71875 31.941406 C 10.691406 33.789062 11.757812 35.484375 13.441406 36.257812 C 13.402344 36.726562 13.402344 37.195312 13.441406 37.664062 C 13.441406 44.832031 21.792969 50.65625 32.097656 50.65625 C 42.398438 50.65625 50.753906 44.832031 50.753906 37.664062 C 50.789062 37.195312 50.789062 36.726562 50.753906 36.257812 C 52.363281 35.453125 53.371094 33.800781 53.34375 32 Z M 21.34375 35.199219 C 21.34375 33.433594 22.777344 32 24.542969 32 C 26.3125 32 27.742188 33.433594 27.742188 35.199219 C 27.742188 36.96875 26.3125 38.398438 24.542969 38.398438 C 22.777344 38.398438 21.34375 36.96875 21.34375 35.199219 Z M 39.9375 44 C 37.664062 45.710938 34.871094 46.582031 32.03125 46.464844 C 29.191406 46.582031 26.398438 45.710938 24.128906 44 C 23.847656 43.65625 23.871094 43.15625 24.183594 42.839844 C 24.5 42.527344 25 42.503906 25.34375 42.785156 C 27.269531 44.195312 29.617188 44.90625 32 44.800781 C 34.386719 44.929688 36.746094 44.242188 38.6875 42.847656 C 39.042969 42.503906 39.605469 42.511719 39.953125 42.863281 C 40.296875 43.21875 40.289062 43.785156 39.9375 44.128906 Z M 39.359375 38.527344 C 37.59375 38.527344 36.160156 37.09375 36.160156 35.328125 C 36.160156 33.5625 37.59375 32.128906 39.359375 32.128906 C 41.128906 32.128906 42.558594 33.5625 42.558594 35.328125 C 42.59375 36.203125 42.269531 37.054688 41.65625 37.6875 C 41.046875 38.316406 40.203125 38.664062 39.328125 38.65625 Z M 39.359375 38.527344" fill="white"></path></svg></button></div></div><div class="post-module--comments--82b11"><div id="disqus_thread"></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/taming-android-resources-and-layoutinflater-for-string-manipulation/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-d6f3d61ccb282fb8165b.js\"],\"component---src-templates-categories-template-tsx\":[\"/component---src-templates-categories-template-tsx-859e35c587acf71c198b.js\"],\"component---src-templates-category-template-tsx\":[\"/component---src-templates-category-template-tsx-31dcf2f4c6782b6daf76.js\"],\"component---src-templates-index-template-tsx\":[\"/component---src-templates-index-template-tsx-b04e8e72be728a8bb3b0.js\"],\"component---src-templates-not-found-template-tsx\":[\"/component---src-templates-not-found-template-tsx-014aeb08e620be2c6f06.js\"],\"component---src-templates-page-template-tsx\":[\"/component---src-templates-page-template-tsx-143dc7e75923189f89b7.js\"],\"component---src-templates-post-template-tsx\":[\"/component---src-templates-post-template-tsx-bdb4c35f343f99184056.js\"],\"component---src-templates-presentation-template-tsx\":[\"/component---src-templates-presentation-template-tsx-8f5dea1083b790ad0dd2.js\"],\"component---src-templates-tag-template-tsx\":[\"/component---src-templates-tag-template-tsx-3162a4350edddef38bdd.js\"],\"component---src-templates-tags-template-tsx\":[\"/component---src-templates-tags-template-tsx-a419c2550704f45dac49.js\"],\"component---src-templates-talks-template-tsx\":[\"/component---src-templates-talks-template-tsx-8490d78219e6e96dc559.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="9afc5b473ea36f127212";</script><script src="/webpack-runtime-3d1c01f4863f820f5d60.js" async></script><script src="/framework-c2bc3b87683eb14081d4.js" async></script><script src="/d904c7bf-6421a2795df996456d37.js" async></script><script src="/app-d6f3d61ccb282fb8165b.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>